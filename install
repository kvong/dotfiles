#!/bin/bash

# Set root password
sudo passwd root

echo Copying files over
sudo bash -c "cat ~/dotfiles/rc.local > /etc/rc.local"
sudo chmod 760 /etc/rc.local

cat ~/dotfiles/.fehbg > ~/.fehbg
cat ~/dotfiles/.vimrc > ~/.vimrc
cat ~/dotfiles/.Xresources > ~/.Xresources
cp -r ~/dotfiles/.bashrc ~/
cp -r ~/dotfiles/dunst ~/.config/
cp -r ~/dotfiles/Scripts ~/
cp -r ~/dotfiles/.local ~/
cp -r ~/dotfiles/.icons ~/
cp -r ~/dotfiles/.themes ~/

# Create note directory for notify scripts
mkdir ~/Notes/
touch ~/Notes/notes

source ~/.bahrc

echo Updating repo
sudo apt-get update

# Install standard dependencies
echo Installing dependencies
sudo apt -y install gtk2-engines-murrine gtk2-engines-pixbuf libnotify-bin xserver-xorg-input-libinput xinput exfat-fuse exfat-utils imagemagick-6.q16 graphicsmagick-imagemagick-compat imagemagick-6.q16hdri texlive-full unrar p7zip-full python-unidecode xdotool

# Dunst dependencies
sudo apt -y install libdbus-1-dev libx11-dev libxinerama-dev libxrandr-dev libxss-dev libglib2.0-dev libpango1.0-dev libgtk-3-dev libxdg-basedir-dev

git clone https://github.com/dunst-project/dunst.git ~/.config/dunst
cd ~/.config/dunst/
make
sudo make install
cat ~/dotfiles/dunst/dunstrc > ~/.config/dunst/dunstrc

# Install base apps
echo Installing base apps
sudo apt-get -y install rofi compton lxappearance vim thunar terminator rxvt-unicode dunst feh neofetch python-pip autoconf vifm conky zathura okular

curl https://raw.githubusercontent.com/mina86/urxvt-tabbedex/master/install | sh

# Install Vim plugins
echo Installing Vim plugins
git clone https://github.com/jiangmiao/auto-pairs.git   ~/.vim/bundle/auto-pairs
git clone https://github.com/scrooloose/nerdtree.git    ~/.vim/bundle/nerdtree
git clone https://github.com/SirVer/ultisnips.git       ~/.vim/bundle/ultilsnips
git clone https://github.com/honza/vim-snippets.git     ~/.vim/bundle/vim-snippets
git clone https://github.com/VundleVim/Vundle.vim.git   ~/.vim/bundle/Vundle.vim
git clone https://github.com/morhetz/gruvbox.git        ~/.vim/bundle/gruvbox
git clone https://github.com/lervag/vimtex.git          ~/.vim/bundle/vimtex
git clone https://github.com/easymotion/vim-easymotion.git ~/.vim/bundle/vim-easymotion
git clone https://github.com/dhruvasagar/vim-table-mode.git ~/.vim/bundle/vim-table-mode
git clone git://github.com/godlygeek/tabular.git ~/.vim/bundle/tabular
git clone https://github.com/vimwiki/vimwiki.git ~/.vim/bundle/vimwiki
git clone https://github.com/plasticboy/vim-markdown.git ~/.vim/bundle/vim-markdown
git clone https://github.com/JamshedVesuna/vim-markdown-preview.git ~/.vim/bundle/vim-markdown-preview

vim +PluginInstall +qall

cp -r ~/dotfiles/UltiSnips/ ~/.vim/bundle/vim-snippets/

# Install calibre
sudo -v && wget -nv -O- https://download.calibre-ebook.com/linux-installer.sh | sudo sh /dev/stdin
xdg-mime default okularApplication_pdf.desktop application/pdf

echo "Installation Completed"
